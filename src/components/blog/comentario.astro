<div class="mx-auto p-8 bg-gradient-to-r from-green-800 to-blue-900 rounded-md" style="max-width: 600px;">
    <div id="comment-section" class="mb-8">
        <h3 class="text-2xl font-bold mb-4 text-white">Comentarios:</h3>
        <div id="comments-container"></div>
    </div>

    <div class="mb-4">
        <h3 class="text-2xl font-bold mb-4 text-white">Deja un comentario con imagen:</h3>
        <div class="bg-white p-6 rounded-md shadow-md">
            <textarea class="w-full p-4 border-2 border-white rounded-md mb-4" id="comment-input"></textarea>
            <label for="file-input" class="cursor-pointer bg-gradient-to-r from-blue-700 to-blue-800 text-white py-2 px-4 rounded-md hover:from-blue-800 hover:to-blue-900 transition-all duration-300">
                Subir Imagen (Obligatorio)
            </label>
            <input type="file" id="file-input" accept="image/*" class="hidden">
            <button class="px-6 py-3 bg-gradient-to-r from-green-700 to-green-800 text-white rounded-md hover:from-green-800 hover:to-green-900 mt-4 transition-all duration-300" id="submit-button">Enviar</button>
        </div>
    </div>
</div>
<script>
    const submitButton = document.getElementById("submit-button");
    const commentInput = document.getElementById("comment-input");
    const commentsContainer = document.getElementById("comments-container");
    const fileInput = document.getElementById("file-input");
    const imagesContainer = document.getElementById("images-container");

    const forbiddenWords = ["puto", "palabra2", "palabra3"]; // Agrega aquí las palabras prohibidas

    submitButton.addEventListener("click", function() {
        const comment = commentInput.value;
        const file = fileInput.files[0];

        if (comment.trim() !== "" && file) {
            if (containsForbiddenWords(comment)) {
                alert("Por favor, evita el uso de palabras ofensivas.");
            } else {
                const commentElement = createCommentElement(comment, file);
                commentsContainer.appendChild(commentElement);
                commentInput.value = "";
                fileInput.value = ""; // Limpiar el input de archivo después de enviar
            }
        } else {
            alert("Por favor, completa todos los campos.");
        }
    });

    function containsForbiddenWords(text) {
        const lowerCaseText = text.toLowerCase();
        return forbiddenWords.some(word => lowerCaseText.includes(word));
    }

    function createCommentElement(commentText, file) {
        const commentElement = document.createElement("div");
        commentElement.classList.add("bg-white", "p-6", "mb-4", "rounded-md", "shadow-md");

        const commentTextElement = document.createElement("div");
        commentTextElement.innerHTML = commentText;
        commentTextElement.classList.add("mb-2");

        const imageElement = document.createElement("img");
        const reader = new FileReader();
        reader.onload = function(e) {
            imageElement.src = e.target.result;
            imageElement.classList.add("rounded-full", "h-12", "w-12", "object-cover", "mb-2", "mr-2");
        };
        reader.readAsDataURL(file);

        const editButton = document.createElement("button");
        editButton.innerHTML = "Editar";
        editButton.classList.add("mr-2", "text-blue-700", "hover:text-blue-800", "transition-all", "duration-300");
        editButton.addEventListener("click", function() {
            const editedComment = prompt("Edita tu comentario:", commentText);
            if (editedComment !== null) {
                commentTextElement.innerHTML = editedComment;
            }
        });

        const deleteButton = document.createElement("button");
        deleteButton.innerHTML = "Eliminar";
        deleteButton.classList.add("text-red-700", "hover:text-red-800", "transition-all", "duration-300");
        deleteButton.addEventListener("click", function() {
            commentsContainer.removeChild(commentElement);
        });

        commentElement.appendChild(commentTextElement);
        commentElement.appendChild(imageElement);
        commentElement.appendChild(editButton);
        commentElement.appendChild(deleteButton);

        return commentElement;
    }
</script>